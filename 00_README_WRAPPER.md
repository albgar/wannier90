## Simple wrapper for wannier90

Within the context of the Siesta project, a small patch for
wannier90-3.1.0 has been created to enable a simpler interface between
the codes. The main change is the wrapping of the ``wannier_prog``
program to turn it into a subroutine that can be called directly from
another program. That is the only entry point of the API, as
implemented in the ``wannier90_m`` module.

In addition, a simple CMake building system has been implemented to facilitate
the automatic compilation of the wrapper.

### Changes to the wannier90 code

The ``wannier90_wrapper`` subroutine accepts as arguments:

* The ``seedname`` or file prefix.
* The MPI communicator to be used (only in the MPI version)
* (Optional) nnkp_mode: a flag to request only the generation of a .nnkp file.
* (Optional) dryrun_mode: a flag to perform a simple dry-run to check the input file.
* (Optional) Arrays to hold the information about k-point neighbors
* (Optional) Arrays to hold the information about the unitary matrices

The last two are convenience arguments to enable client codes to
extract the needed information directly, without having to read the
.nnkp and .chk files, respectively.

All other interaction with wannier90 is through files:

* ``seedname.win`` (provided by client) is the input file
* ``seedname.amn`` (provided by client) 
* ``seedname.mmn`` (provided by client)
* ``seedname.{eig_ext}`` (provided by client)
* ``seedname.wout`` (generated by wannier90)
*  ... plus other plotting and auxiliary files generated by wannier90.

The standard command-line interaction with wannier90 has been bypassed.

In MPI operation, no initialization is done by wannier90, and the
communicator to be used is passed explicitly. Internally, the
communicator is named ``mpi_comm_w90``. The ``mpif.h`` file is read
once in the auxiliary module w90_mpi, which is used by relevant pieces
of the code.

Some minor changes have been needed to make sure that all variables
are deallocated at the end of the wannier90 run, so that the wrapper
can be called repeatedly without errors.

### Compilation with CMake

(Note that the standard makefile-based building system with **NOT**
work for the wrapper.)

Basic incantation (items in brackets are optional, needed for MPI
operation and to help finding an appropriate Lapack library):

```
  cmake -S. -B _build [ -DWITH_MPI=ON ] [-DLAPACK_LIBRARY=   ] [ -DCMAKE_INSTALL_PREFIX=/path/to/inst ]
  cmake --build _build
  cmake --build _build --target test   
  [ cmake --install _build ]
```

On some systems the src/comms.F90 file might have to be compiled
without optimization to avoid an obscure bug in MPI operation that
leads to a segfault. In that case use

```
  cmake -S. -B _build -DWITH_MPI=ON -DWITH_NOT_OPT_COMMS=ON   [ + other options ]
```

  

